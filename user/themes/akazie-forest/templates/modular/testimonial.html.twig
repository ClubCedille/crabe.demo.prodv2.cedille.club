{% if page.header.section.settings.module.enabled %}
</div></div>
{% set selfid = 'module-' ~ page.template|md5|slice(0, 8) ~ '-' ~ page.slug|md5|slice(0, 8)  %}
<div class="quote-area {{selfid}}">
    <div class="container"><div class="container-inner">
        <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                {% for slide in page.header.section.slides %}
                {% set icon = (slide.icon | first).name %}
                {% if loop.first %}
                <div class="carousel-item active">
                    <div class="quote-item">
                        <span class="quote-inverted d-inline-block">
                            {# Check if image exists in page media (new @self method) #}
                            {% if page.media[icon] is defined %}
                                <img src="{{ page.media[icon].url }}" alt="Inverted Icon">
                            {# Fallback to old theme path for backward compatibility #}
                            {% else %}
                                <img src="{{ url('theme://custom/images/' ~ icon) }}" alt="Inverted Icon">
                            {% endif %}
                        </span>
                        <p>{{slide.text}}</p>
                        <div class="quote-author {{selfid}}">
                            <span class="designation {{selfid}}">{{slide.position}}</span>
                            <h6 class="subh">{{slide.author}}</h6>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="carousel-item">
                    <div class="quote-item">
                        <span class="quote-inverted d-inline-block">
                            {# Check if image exists in page media (new @self method) #}
                            {% if page.media[icon] is defined %}
                                <img src="{{ page.media[icon].url }}" alt="Inverted Icon">
                            {# Fallback to old theme path for backward compatibility #}
                            {% else %}
                                <img src="{{ url('theme://custom/images/' ~ icon) }}" alt="Inverted Icon">
                            {% endif %}
                        </span>
                        <p>{{slide.text}}</p>
                        <div class="quote-author">
                            <span class="designation">{{slide.position}}</span>
                            <h6 class="subh">{{slide.author}}</h6>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls"
                data-bs-slide="prev">
                <i class="fal fa-chevron-left"></i>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls"
                data-bs-slide="next">
                <i class="fal fa-chevron-right"></i>
            </button>
        </div>
    </div></div>
</div>
<div class="container"><div class="container-inner">
{% endif %}

<style>
{% if page.header.section.settings.bgcolor %}
.quote-area.{{selfid}}{
    background-color: {{page.header.section.settings.bgcolor}};
}
{% endif %}
{% if page.header.section.settings.title.fontsize %}
.quote-author.{{selfid}} h6{
    font-size: {{page.header.section.settings.title.fontsize}}px;
}
{% endif %}
{% if page.header.section.settings.subtitle.fontsize %}
.designation.{{selfid}}{
    font-size: {{page.header.section.settings.subtitle.fontsize}}px;
}
{% endif %}
</style>